<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.5.1"/>
    <title>lakehouse_engine_usage.data_quality.prisma</title>
            <link rel="icon" href="https://github.com/adidas/lakehouse-engine/blob/master/assets/img/lakehouse_engine_logo_no_bg_160.png?raw=true"/>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#000000;background-color:#f1efef;border-color:#f1f1f1;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:150%;overflow:auto;margin-bottom:1rem;}.pdoc table th, .pdoc table td{padding:12px 13px;border:1px solid var(--accent2);}.pdoc table th{font-weight:600;}</style>
    <style>/*! custom.css */</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../data_quality.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;lakehouse_engine_usage.data_quality</a>

            <img src="https://github.com/adidas/lakehouse-engine/blob/master/assets/img/lakehouse_engine_logo_no_bg_160.png?raw=true" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#prisma">Prisma</a>
  <ul>
    <li><a href="#how-to-use-prisma">How to use Prisma?</a></li>
    <li><a href="#what-are-the-main-changes-on-my-acon-if-i-already-implemented-dq">What are the main changes on my ACON if I already implemented DQ?</a></li>
    <li><a href="#end2end-example">End2End Example</a></li>
    <li><a href="#troubleshootingcommon-issues">Troubleshooting/Common issues</a></li>
  </ul></li>
</ul>




            <footer>Lakehouse Engine v1.22.1</footer>

</div>
    </nav>
    <main class="pdoc">
    <section class="module-info">

                <div class="docstring"><h1 id="prisma">Prisma</h1>

<p>Prisma is part of the Lakehouse Engine DQ Framework, and it allows users to read DQ functions dynamically from a table instead of writing them explicitly in the Acons.</p>

<h2 id="how-to-use-prisma">How to use Prisma?</h2>

<ul>
<li>Use the Lakehouse Engine version: 1.22.0 or later;</li>
<li>Use DBR 13.3 or later.  If you are not using Databricks, ensure a similar environment with Spark 3.4.1 and Delta 2.4.0.</li>
<li>Create the DQ Checks in a table in your Data Product:
<ul>
<li>Each data quality check conducted in Prisma will be hosted within the bucket defined in the engine config file (lakehouse_engine/configs/engine.yaml). Consequently, the result sink location will receive the results of their assessments at the granularity of each "run", capturing all records generated during every operation. The DQ Checks table is located in the demanding data product and can have any name (i.e: data_quality_checks).</li>
<li>The idea is for it to be a central bucket for all DPs to ensure easier and better observability and unlock offering of easier insights over the Data Quality of the Lakehouse.</li>
</ul></li>
</ul>

<p>Below you find a DDL example with the expected schema and description for the fields:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">my_database</span><span class="p">.</span><span class="n">data_quality_checks</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">EXTERNAL</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">my_database</span><span class="p">.</span><span class="n">data_quality_checks</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">dq_rule_id</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;DQ Rule ID.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">dq_tech_function</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;Great Expectations function type to apply according to the DQ rules type. Example: expect_column_to_exist.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">execution_point</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;In motion/At rest.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">schema</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;The database schema on which the check is to be applied.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">table</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;The table on which the check is to be applied.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">column</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;The column (either on Lakehouse or in other accessible source systems, such as FDP or SAP BW) on which the check is to be applied.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">filters</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;General filters to the data set (where part of the statement). Note: this is purely descriptive at this point as there is no automated action/filtering of the Lakehouse Engine or PRISMA upon it.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">arguments</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;Additional arguments to run the Great Expectation Function in the same order as they appear in the function. Example: {&quot;column&quot;: &quot;amount&quot;, &quot;min_value&quot;: 0}.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">dimension</span><span class="w"> </span><span class="n">STRING</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;Data Quality dimension.&#39;</span>
<span class="p">)</span>
<span class="k">USING</span><span class="w"> </span><span class="n">DELTA</span>
<span class="k">LOCATION</span><span class="w"> </span><span class="s1">&#39;s3://my-data-product-bucket/inbound/data_quality_checks&#39;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;Table with dummy data mapping DQ Checks.&#39;</span>
<span class="n">TBLPROPERTIES</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;lakehouse.primary_key&#39;</span><span class="o">=</span><span class="s1">&#39;dq_rule_id&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;delta.enableChangeDataFeed&#39;</span><span class="o">=</span><span class="s1">&#39;true&#39;</span>
<span class="p">)</span>
</code></pre>
</div>

<p><strong>Data sample:</strong></p>

<table>
<thead>
<tr>
  <th>dq_rule_id</th>
  <th style="text-align:left;">dq_tech_function</th>
  <th style="text-align:left;">execution_point</th>
  <th style="text-align:left;">schema</th>
  <th style="text-align:left;">table</th>
  <th style="text-align:left;">column</th>
  <th style="text-align:left;">filters</th>
  <th style="text-align:left;">arguments</th>
  <th>dimension</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td style="text-align:left;">expect_column_values_to_not_be_null</td>
  <td style="text-align:left;">at_rest</td>
  <td style="text-align:left;">my_database_schema</td>
  <td style="text-align:left;">dummy_sales</td>
  <td style="text-align:left;">ordered_item</td>
  <td style="text-align:left;"></td>
  <td style="text-align:left;">{"column": "ordered_item"}</td>
  <td>Completeness</td>
</tr>
<tr>
  <td>2</td>
  <td style="text-align:left;">expect_column_min_to_be_between</td>
  <td style="text-align:left;">in_motion</td>
  <td style="text-align:left;">my_database_schema</td>
  <td style="text-align:left;">dummy_sales</td>
  <td style="text-align:left;">ordered_item</td>
  <td style="text-align:left;"></td>
  <td style="text-align:left;">{"column": "amount", "min_value": 0}</td>
  <td>Completeness</td>
</tr>
<tr>
  <td>3</td>
  <td style="text-align:left;">expect_column_values_to_not_be_in_set</td>
  <td style="text-align:left;">in_motion</td>
  <td style="text-align:left;">my_database_schema</td>
  <td style="text-align:left;">dummy_sales</td>
  <td style="text-align:left;">ordered_item</td>
  <td style="text-align:left;"></td>
  <td style="text-align:left;">{"column": "amount", "value_set": [1,2,3]}</td>
  <td>Completeness</td>
</tr>
<tr>
  <td>4</td>
  <td style="text-align:left;">expect_column_pair_a_to_be_not_equal_to_b</td>
  <td style="text-align:left;">at_rest</td>
  <td style="text-align:left;">my_database_schema</td>
  <td style="text-align:left;">dummy_sales</td>
  <td style="text-align:left;">ordered_item</td>
  <td style="text-align:left;"></td>
  <td style="text-align:left;">{"column_A": "amount","column_B": "ordered_item"}</td>
  <td>Completeness</td>
</tr>
<tr>
  <td>5</td>
  <td style="text-align:left;">expect_table_row_count_to_be_between</td>
  <td style="text-align:left;">at_rest</td>
  <td style="text-align:left;">my_database_schema</td>
  <td style="text-align:left;">dummy_sales</td>
  <td style="text-align:left;">ordered_item</td>
  <td style="text-align:left;"></td>
  <td style="text-align:left;">{"min_value": 1, "max_value": 10}</td>
  <td>Completeness</td>
</tr>
</tbody>
</table>

<p><strong>Table definition:</strong></p>

<table>
<thead>
<tr>
  <th>Column Name</th>
  <th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
  <td>dq_rule_id</td>
  <td>The identifier of a data quality rule.</td>
</tr>
<tr>
  <td>dq_tech_function</td>
  <td>Type of Great Expectations function to apply according to the DQ rules type. See the values here: <a href="https://greatexpectations.io/legacy/v1/expectations/?filterType=Backend+support&viewType=Summary&showFilters=true&subFilterValues=spark">Gallery of Expectations and Packages</a></td>
</tr>
<tr>
  <td>execution_point</td>
  <td>The way how validations will be performed on top the the data set. List of values: at_rest, in_motion.</td>
</tr>
<tr>
  <td>schema</td>
  <td>The schema on which the check is to be applied.</td>
</tr>
<tr>
  <td>table</td>
  <td>The table on which the check is to be applied.</td>
</tr>
<tr>
  <td>column</td>
  <td>The column on which the check is to be applied.</td>
</tr>
<tr>
  <td>filters</td>
  <td>General filters to the data set (where part of the statement). <strong>Note</strong>: this is purely descriptive at this point as there is no automated action/filtering of the Lakehouse Engine or PRISMA upon it.</td>
</tr>
<tr>
  <td>arguments</td>
  <td>Additional arguments to run the Great Expectation Function in the same order as they appear in the function.</td>
</tr>
<tr>
  <td>dimension</td>
  <td>Categorisation of a DQ rule related to one of the dimensions. List of values: Completeness, Uniqueness, Timeliness, Validity, Consistency, Accuracy. <strong>Note</strong>: these values are purely descriptive.</td>
</tr>
</tbody>
</table>

<p><strong>Execution behaviour</strong> - The value of the <strong>execution_point</strong> column determines the type of Acon execution:</p>

<ul>
<li><p><strong>For records at_rest</strong>, they will only be processed when the Lakehouse engine is called by the execute_dq_validation() function.</p></li>
<li><p><strong>For records in_motion</strong>, they will only be processed when the Lakehouse engine is called by load_data() function.</p></li>
</ul>

<h2 id="what-are-the-main-changes-on-my-acon-if-i-already-implemented-dq">What are the main changes on my ACON if I already implemented DQ?</h2>

<p>The following configurations represent the minimum requirements to make Prisma DQ work.</p>

<ul>
<li><strong>dq_type:</strong> "prisma" - the value must be set in order for the engine process the DQ with Prisma;</li>
<li><strong>store_backend:</strong> "file_system" or "s3" - which store backend to use;
<ul>
<li><strong>bucket</strong> - the bucket name to consider for the store_backend (store DQ artefacts). <strong>Note</strong>: only applicable and mandatory for store_backend s3.</li>
<li><strong>local_fs_root_dir:</strong> path of the root directory. <strong>Notes</strong>: only applicable for store_backend file_system;</li>
</ul></li>
<li><strong>dq_db_table:</strong> the DQ Check table that is located in the demanding data product;</li>
<li><strong>dq_table_table_filter:</strong> name of the table which rules are to be applied in the validations. The table name must match with the values inserted in the column "table" from dq_db_table;</li>
<li><strong>data_product_name:</strong> the name of the data product;</li>
<li><strong>tbl_to_derive_pk or unexpected_rows_pk:</strong>
<ul>
<li>tbl_to_derive_pk - automatically derive the primary keys from a given database table. <strong>Note</strong>: the primary keys are derived from the <strong>lakehouse.primary_key</strong> property of a table.   </li>
<li>unexpected_rows_pk - the list of columns composing the primary key of the source data to identify the rows failing the DQ validations.</li>
</ul></li>
</ul>

<p><strong>DQ Prisma Acon example</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="s2">&quot;dq_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dq_validator_in_motion&quot;</span><span class="p">,</span>
    <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_transform&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dq_type&quot;</span><span class="p">:</span> <span class="s2">&quot;prisma&quot;</span><span class="p">,</span>
    <span class="s2">&quot;store_backend&quot;</span><span class="p">:</span> <span class="s2">&quot;file_system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;local_fs_root_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/my-data-product/artefacts/dq&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dq_db_table&quot;</span><span class="p">:</span> <span class="n">DQ_DB_TABLE</span><span class="p">,</span>
    <span class="s2">&quot;dq_table_table_filter&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data_product_name&quot;</span><span class="p">:</span> <span class="n">DATA_PRODUCT_NAME</span><span class="p">,</span>
    <span class="s2">&quot;tbl_to_derive_pk&quot;</span><span class="p">:</span> <span class="n">DB_TABLE</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">],</span>
</code></pre>
</div>

<div class="pdoc-alert pdoc-alert-note">

<p>Available extra parameters to use in the DQ Specs for Prisma:</p>

<ul>
<li><strong>data_docs_local_fs</strong> - the path for data docs. The parameter is useful in case you want your DQ Results to be reflected on the automatic Data Docs site;</li>
<li><strong>data_docs_prefix</strong> - prefix where to store data_docs' data. This parameter must be used together with <code>data_docs_local_fs</code>;</li>
<li><strong>dq_table_extra_filters</strong> - extra filters to be used when deriving DQ functions. This is an SQL expression to be applied to <code>dq_db_table</code> which means that the statements must use one of the available columns in the table. For example: dq_rule_id in ('rule1','rule2');</li>
<li><strong>data_docs_bucket</strong> - the bucket name for data docs only. When defined, it will supersede bucket parameter. <strong>Note:</strong> only applicable for store_backend s3;</li>
<li><strong>expectations_store_prefix</strong> - prefix where to store expectations' data. <strong>Note:</strong> only applicable for store_backend s3;</li>
<li><strong>validations_store_prefix</strong> - prefix where to store validations' data. <strong>Note:</strong> only applicable for store_backend s3;</li>
<li><strong>checkpoint_store_prefix</strong> - prefix where to store checkpoints' data. <strong>Note:</strong> only applicable for store_backend s3;</li>
</ul>

</div>

<h2 id="end2end-example">End2End Example</h2>

<p>Below you can also find an End2End and detailed example of loading data into the DQ Checks table and then using PRISMA both with load_data() and execute_dq_validation().</p>

<p><details>
  <summary><b>1 - Load the DQ Checks Table</b></summary></p>

<p>This example shows how to insert data into the data_quality_checks table using an Acon with a csv file as a source.
  The location provided is just an example of a place to store the csv. It is also important that the source file contains the <strong>data_quality_checks</strong> schema.
  <div class="pdoc-code codehilite">
  <pre><span></span><code><span class="n">acon</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;input_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
      <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;read_dq_checks&quot;</span><span class="p">,</span>
      <span class="s2">&quot;read_type&quot;</span><span class="p">:</span> <span class="s2">&quot;batch&quot;</span><span class="p">,</span>
      <span class="s2">&quot;data_format&quot;</span><span class="p">:</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span>
      <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;delimiter&quot;</span><span class="p">:</span> <span class="s2">&quot;;&quot;</span><span class="p">},</span>
      <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-data-product/local_data/data_quality_checks/&quot;</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
      <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;write_dq_checks&quot;</span><span class="p">,</span>
      <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;read_dq_checks&quot;</span><span class="p">,</span>
      <span class="s2">&quot;write_type&quot;</span><span class="p">:</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">,</span>
      <span class="s2">&quot;data_format&quot;</span><span class="p">:</span> <span class="s2">&quot;delta&quot;</span><span class="p">,</span>
      <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-data-product-bucket/inbound/data_quality_checks&quot;</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">],</span>
  <span class="p">}</span>
 <br />
  <span class="n">load_data</span><span class="p">(</span><span class="n">acon</span><span class="o">=</span><span class="n">acon</span><span class="p">)</span>
  </code></pre>
  </div></p>

<p></details>
<details>
  <summary><b>2 - PRISMA - IN MOTION (load_data)</b></summary>
  <div class="pdoc-code codehilite">
  <pre><span></span><code><span class="n">cols_to_rename</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;ordered_item&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;order_date&quot;</span><span class="p">,</span> <span class="s2">&quot;article&quot;</span><span class="p">:</span> <span class="s2">&quot;article_id&quot;</span><span class="p">}</span> <br />
  <span class="n">acon</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;input_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_bronze&quot;</span><span class="p">,</span>
              <span class="s2">&quot;read_type&quot;</span><span class="p">:</span> <span class="s2">&quot;batch&quot;</span><span class="p">,</span>
              <span class="s2">&quot;data_format&quot;</span><span class="p">:</span> <span class="s2">&quot;delta&quot;</span><span class="p">,</span>
              <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-data-product-bucket/bronze/dummy_sales&quot;</span><span class="p">,</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;transform_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_transform&quot;</span><span class="p">,</span>
              <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_bronze&quot;</span><span class="p">,</span>
              <span class="s2">&quot;transformers&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="p">{</span>
                      <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;rename&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span>
                          <span class="s2">&quot;cols&quot;</span><span class="p">:</span> <span class="n">cols_to_rename</span><span class="p">,</span>
                      <span class="p">},</span>
                  <span class="p">},</span>
              <span class="p">],</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;dq_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dq_validator_in_motion&quot;</span><span class="p">,</span>
              <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_transform&quot;</span><span class="p">,</span>
              <span class="s2">&quot;dq_type&quot;</span><span class="p">:</span> <span class="s2">&quot;prisma&quot;</span><span class="p">,</span>
              <span class="s2">&quot;store_backend&quot;</span><span class="p">:</span> <span class="s2">&quot;file_system&quot;</span><span class="p">,</span>
              <span class="s2">&quot;local_fs_root_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/my-data-product/artefacts/dq&quot;</span><span class="p">,</span>
              <span class="s2">&quot;dq_db_table&quot;</span><span class="p">:</span> <span class="n">DQ_DB_TABLE</span><span class="p">,</span>
              <span class="s2">&quot;dq_table_table_filter&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales&quot;</span><span class="p">,</span>
              <span class="s2">&quot;dq_table_extra_filters&quot;</span><span class="p">:</span> <span class="s2">&quot;1 = 1&quot;</span><span class="p">,</span>
              <span class="s2">&quot;data_docs_local_fs&quot;</span><span class="p">:</span> <span class="s2">&quot;my-data-product/my-data-product-dq-site&quot;</span><span class="p">,</span>
              <span class="s2">&quot;data_docs_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/my-data-product-bucket/data_docs/site/&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DQ_PREFIX</span><span class="p">),</span>
              <span class="s2">&quot;data_product_name&quot;</span><span class="p">:</span> <span class="n">DATA_PRODUCT_NAME</span><span class="p">,</span>
              <span class="s2">&quot;tbl_to_derive_pk&quot;</span><span class="p">:</span> <span class="n">DB_TABLE</span><span class="p">,</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;output_specs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_silver&quot;</span><span class="p">,</span>
              <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dq_validator_in_motion&quot;</span><span class="p">,</span>
              <span class="s2">&quot;write_type&quot;</span><span class="p">:</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">,</span>
              <span class="s2">&quot;data_format&quot;</span><span class="p">:</span> <span class="s2">&quot;delta&quot;</span><span class="p">,</span>
              <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-data-product-bucket/silver/dummy_sales_dq_template_in_motion&quot;</span><span class="p">,</span>
          <span class="p">}</span>
      <span class="p">],</span>
  <span class="p">}</span>
 <br />
  <span class="n">load_data</span><span class="p">(</span><span class="n">acon</span><span class="o">=</span><span class="n">acon</span><span class="p">)</span>
  </code></pre>
  </div></p>

<p></details>
<details>
  <summary><b>3 - PRISMA - AT REST (exec_dq_validation)</b></summary>
  <div class="pdoc-code codehilite">
  <pre><span></span><code><span class="n">acon</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;input_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales_source&quot;</span><span class="p">,</span>
          <span class="s2">&quot;read_type&quot;</span><span class="p">:</span> <span class="s2">&quot;batch&quot;</span><span class="p">,</span>
          <span class="s2">&quot;db_table&quot;</span><span class="p">:</span> <span class="n">DB_TABLE</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="s2">&quot;dq_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;spec_id&quot;</span><span class="p">:</span> <span class="s2">&quot;dq_validator_at_rest&quot;</span><span class="p">,</span>
          <span class="s2">&quot;input_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sales_input&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dq_type&quot;</span><span class="p">:</span> <span class="s2">&quot;prisma&quot;</span><span class="p">,</span>
          <span class="s2">&quot;store_backend&quot;</span><span class="p">:</span> <span class="s2">&quot;file_system&quot;</span><span class="p">,</span>
          <span class="s2">&quot;local_fs_root_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/my-data-product/artefacts/dq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dq_db_table&quot;</span><span class="p">:</span> <span class="n">DQ_DB_TABLE</span><span class="p">,</span>
          <span class="s2">&quot;dq_table_table_filter&quot;</span><span class="p">:</span> <span class="s2">&quot;dummy_sales&quot;</span><span class="p">,</span>
          <span class="s2">&quot;data_docs_local_fs&quot;</span><span class="p">:</span> <span class="s2">&quot;my-data-product/my-data-product-dq-site&quot;</span><span class="p">,</span>
          <span class="s2">&quot;data_docs_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/my-data-product-bucket/data_docs/site/&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DQ_PREFIX</span><span class="p">),</span>
          <span class="s2">&quot;data_product_name&quot;</span><span class="p">:</span> <span class="n">DATA_PRODUCT_NAME</span><span class="p">,</span>
          <span class="s2">&quot;tbl_to_derive_pk&quot;</span><span class="p">:</span> <span class="n">DB_TABLE</span><span class="p">,</span>
      <span class="p">},</span>
  <span class="p">}</span>
 <br />
  <span class="n">execute_dq_validation</span><span class="p">(</span><span class="n">acon</span><span class="o">=</span><span class="n">acon</span><span class="p">)</span>
  </code></pre>
  </div></p>

<p></details></p>

<h2 id="troubleshootingcommon-issues">Troubleshooting/Common issues</h2>

<p>This section provides a summary of common issues and resolutions.</p>

<p><details>
  <summary><b>Error type: filter does not get rules from DQ Checks table.</b></summary> <br />
  <img src="../../assets/prisma/img/dq_checks_table_w_no_rules.png" alt="image" width="1000px" height="auto"></p>

<p><b>Solution:</b> make sure the records in your DQ Checks table are well-defined. In the Acon, ensure that you have the dq_table_table_filter with the correct table name.
</details></p>

<p><details>
  <summary><b>Error type: missing expectation.</b></summary>
  <img src="../../assets/prisma/img/missing_expectation.png" alt="image" width="1000px" height="auto"></p>

<p><b>Solution:</b> make sure that you are using a valid expectation. See the valid ones on: <a href="https://greatexpectations.io/legacy/v1/expectations/?filterType=Backend+support&amp;viewType=Summary&amp;showFilters=true&amp;subFilterValues=spark">Gallery of Expectations and Packages</a>
</details></p>

<p><details>
  <summary><b>Error type: missing expectation parameters.</b></summary>
  <img src="../../assets/prisma/img/missing_expectation_parameters.png" alt="image" width="1000px" height="auto"></p>

<p><b>Solution:</b> make sure that your "arguments" column in the DQ CHECKS table has all necessary parameters for the expectation. For example, the expectation <a href="https://greatexpectations.io/legacy/v1/expectations/expect_column_values_to_not_be_null?filterType=Backend%20support&amp;gotoPage=1&amp;showFilters=true&amp;viewType=Summary&amp;subFilterValues=spark">expect_column_values_to_not_be_null</a> needs one argument (column (str): The column name).
</details></p>
</div>

    </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>